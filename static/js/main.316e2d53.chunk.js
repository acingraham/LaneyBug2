(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{42:function(e,t,n){},70:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n.n(c),r=n(17),a=n.n(r),s=n(18),i=n(31),u=n(1),l=o.a.createContext(),j=function(e){var t=e.children,n=Object(i.useGoogleLogin)({clientId:"934914015863-16l8d98h298c138eqca115cf2l587k3a.apps.googleusercontent.com"});return Object(u.jsx)(l.Provider,{value:n,children:t})},f=function(){return o.a.useContext(l)},h=(n(42),n(13)),b=n.n(h),d=n(19),p=n(35),g=n(9),O=n(20),x=n.n(O),m=n(32),v=n(2),y=(n(69),n(70),"https://xrkgyvv5tk.execute-api.us-east-1.amazonaws.com/prod"),w="".concat(y,"/view");"".concat(y,"/favorite");function k(e){var t=e.list,n=Object(c.useState)(0),o=Object(g.a)(n,2),r=o[0],a=o[1],s=function(e,t){for(var n=new Set;n.size<t&&t<e.length;){var c=Math.floor(Math.random()*e.length);n.add(e[c])}return Array.from(n)}(t,20),i=Object(c.useState)(s),l=Object(g.a)(i,2),j=l[0],h=l[1],b=function(e,t){"error"===e.type&&h((function(e){var n=Object(p.a)(e),c=n.indexOf(t);return n.splice(c,1),n}))},d=function(e,t){return function(n,c){console.log("recording view of",e,t,n,c),fetch(w,{headers:{"Content-type":"application/json"},method:"PUT",mode:"cors",body:JSON.stringify({groupId:e,userId:c,url:n})}).then((function(e){return e.json()})).then((function(e){return console.log("SUCCESS",e)})).catch((function(e){return console.log("ERROR",e)}))}}("laney","andrew"),O=f(),x=O.isInitialized,v=O.isSignedIn,y=O.signIn,k=O.signOut,C=O.googleUser;return console.log("data",O),Object(u.jsx)("div",{className:"App",children:Object(u.jsx)(m.Carousel,{onChange:a,showThumbs:!1,useKeyboardArrows:!0,showStatus:!1,autoFocus:!0,children:j.slice(0,10).map((function(e,t){return Object(u.jsxs)("div",{children:[x&&v&&Object(u.jsx)("button",{onClick:k,children:"Log Out"}),x&&!v&&Object(u.jsx)("button",{onClick:y,children:"Log In"}),Object(u.jsx)(S,{isSignedIn:v,url:e,playing:t===r,onError:b,recordView:d,googleUser:C})]},e)}))})})}function S(e){var t=e.url,n=e.playing,o=e.onError,r=e.recordView,a=e.googleUser,s=e.isSignedIn;return Object(c.useEffect)((function(){n&&s&&r(t,a.profileObj.email)}),[n,s]),Object(u.jsx)(x.a,{url:"https://laneybug.s3.amazonaws.com/videos/".concat(t),controls:!0,loop:!0,height:"auto",width:"auto",playing:n,onError:function(e){return o(e,t)}})}function C(e){var t=Object(c.useState)(JSON.parse(localStorage.getItem(e))||[]),n=Object(g.a)(t,2),o=n[0],r=n[1];return function(t){var n=o.concat(t),c=JSON.stringify(n);localStorage.setItem(e,c),r(n)}}function I(){var e=Object(c.useState)(0),t=Object(g.a)(e,2),n=t[0],o=t[1],r=C("laney"),a=C("skip"),s=C("other"),i=Object(c.useState)([]),l=Object(g.a)(i,2),j=l[0],f=l[1];if(Object(c.useEffect)((function(){function e(){return(e=Object(d.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://laneybug.s3.amazonaws.com/group/new/data.json");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,f(n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),!j.length)return null;var h=function(){r(j[n]),o((function(e){return e+1}))},p=function(){a(j[n]),o((function(e){return e+1}))},O=function(){o((function(e){return e-1}))},m=function(){s(j[n]),o((function(e){return e+1}))};return Object(u.jsxs)("div",{onKeyPress:function(e){console.log("keypress")," "===e.key?h():"o"===e.key?m():"b"===e.key&&O()},children:[Object(u.jsxs)("div",{children:[n," / ",j.length]}),Object(u.jsxs)("div",{className:"button-section",children:[Object(u.jsx)("button",{onClick:h,children:"LaneyBug"}),Object(u.jsx)("button",{onClick:p,children:"Skip"}),Object(u.jsx)("button",{onClick:O,children:"Back"}),Object(u.jsx)("button",{onClick:m,children:"Other"})]}),Object(u.jsx)(x.a,{url:"https://laneybug.s3.amazonaws.com/videos/".concat(j[n]),controls:!0,loop:!0,height:"auto",width:"auto",playing:!0,onError:function(e){return function(e,t){"error"===e.type&&p()}(e,j[n])},className:"admin-player"})]})}function E(e){var t=e.file,n=Object(c.useState)([]),o=Object(g.a)(n,2),r=o[0],a=o[1],s=f(),i=s.isSignedIn,l=s.googleUser;return Object(c.useEffect)((function(){function e(){return(e=Object(d.a)(b.a.mark((function e(){var n,c,o,r,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:if(c=e.sent,!i||!l){e.next=21;break}return e.prev=7,e.next=10,fetch("https://laneybug.s3.amazonaws.com/events/".concat(l.profileObj.email,"/view/summary.json"));case 10:return o=e.sent,e.next=13,o.json();case 13:r=e.sent,s=new Set(r),c=c.filter((function(e){return!s.has(e)})),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(7),console.log("Error occurred trying to fetch previously viewed videos",e.t0);case 21:a(c);case 22:case"end":return e.stop()}}),e,null,[[7,18]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,i,l]),r.length?Object(u.jsx)(k,{list:r}):null}var z=function(){return Object(u.jsxs)(v.c,{children:[Object(u.jsx)(v.a,{path:"/admin",children:Object(u.jsx)(I,{})}),Object(u.jsx)(v.a,{path:"/other",children:Object(u.jsx)(E,{file:"https://laneybug.s3.amazonaws.com/group/other/data.json"})}),Object(u.jsx)(v.a,{path:"/skip",children:Object(u.jsx)(E,{file:"https://laneybug.s3.amazonaws.com/group/skip/data.json"})}),Object(u.jsx)(v.a,{path:"/",children:Object(u.jsx)(E,{file:"https://laneybug.s3.amazonaws.com/group/main/data.json"})})]})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,77)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),o(e),r(e),a(e)}))};a.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(s.a,{children:Object(u.jsx)(j,{children:Object(u.jsx)(z,{})})})}),document.getElementById("root")),L()}},[[76,1,2]]]);
//# sourceMappingURL=main.316e2d53.chunk.js.map